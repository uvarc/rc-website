+++
title="UVA Anywhere VPN on Linux"
description = ""
date = "2021-03-22T11:16:27-05:00"
author = "Staff"
categories = [
  "userinfo",
]
images=[""]
tags = [
  "login",
  "security",
  "vpn"
]
draft = false

+++

<p class=lead>ITS does not support the UVA Anywhere VPN client on Linux.  These instructions may work but they are provided for user information only.  UVA RC does <em>not</em> support usage of the VPN on any platform.</p>

- - -

# Setting up the VPN

1. Install Software Prerequisites

    You must install some software using `yum`,`dnf`, or `apt-get`.  Note the slight difference in naming convention between distributions.

    - Rocy/Alma/RedHat/Fedora

        These distributions need the following packages:

        - `openssl`
        - `openconnect`
        - `NetworkManager-openconnect`
        - `NetworkManager-openconnect-gnome`

    - Ubuntu

        The packages are the same but the names are different.  Ubuntu 18.04 and up requires an additional package.

        - `openssl`
        - `openconnect`
        - `network-manager-openconnect`
        - `network-manager-gnome`
        - `network-manager-openconnect-gnome`

    It will be necessary for Network Manager to be able to manage the connection.

2. Obtain a Certificate

    Go to this unpublicized Web location to obtain a certificate for n [non-specific OS](https://cloud.securew2.com/public/82116/limited/?device=Unknown). You will be required to sign in with Netbadge. Once authenticated, fill out the form.  
<img src="/images/linux/cert-nonspecific-os.png" alt="personal-cert" style="max-width:30%; float:right; margin-left:2rem; margin-bottom:2rem;" >

    Your passphrase need not be related to your Netbadge password, and it _must_ be 15 characters or fewer.  The MAC address of your system is optional for UVA Anywhere.

    Click the link to _download_ the certificate.  You will receive a file ending in `.p12`.  In this example we will assume it is named `mst3k.p12`.

 <img src="/images/linux/download-cert.png" alt="download-cert" style="max-width:30%; margin-bottom:2rem;" >

Do not click the Next button.  You may now close the tab for the certificate site.

5. Configure with Network Manager

    Click the network app in your tray, or go to Settings->Network.  Choose VPN and click the + to add a VPN.

    <img src="/images/linux/network-manager-linux.png" alt="network-manager" width=100%>

    Select the Cisco Anyconnect compatible VPN option.

    <img src="/images/linux/add-vpn.png" alt="network-manager" width=100%>

    Fill in the blanks for a new VPN.  Please use the More Secure VPN if you have access to it. The gateway is **moresecure-vpn-1.itc.virginia.edu**.  Otherwise, use the UVA Anywhere VPN whose gateway is **uva-anywhere-1.itc.virginia.edu** as shown in the figure below.

    NetWork Manager may not recognize the `.p12` format.  You can use the file manager of your desktop system to drag and drop the file into both the "User Certificate" and the "Private Key" boxes.

    <img src="/images/linux/vpn-setup-linux.png" alt="vpn-setup" width=80%>

    Click "Add."

    In the Details tab, make sure that "Make available to all users" is *not* checked.  This should be the default.

# Connecting to the VPN

Start the VPN through the Network Manager, either through the applet in the tray (Ubuntu) or in the Notifications section of the taskbar (Rocky/Alma/Fedora).  The state can be controlled through the right arrow.

For the first connection, you may need to go through the Settings application to connect.  After that, log out.  When you log back in, your VPN should appear in the taskbar or tray (the illustration was taken from a Rocky Linux installation).

<img src="/images/linux/running-uva-anywhere.png" alt="start-stop-vpn" style="max-width:30%; float:center; margin-bottom:2rem;" />

<br clear=all />

# More Secure VPN

<img src="/images/linux/linux-msn-vpn.png" alt="msvpn-duo-push" style="max-width:30%; float:right; margin-left:2rem; margin-bottom:2rem;" />

<b style="color:red;">UPDATE:</b> Users of the **More Secure VPN** will now be required to authenticate through Duo before connecting.  When prompted for a password, enter the word `push` or `PUSH` (it is not case-sensitive); you will then receive an approval notification on your mobile device.  After approving the request, the client will connect to the VPN.  Alternatively, you may enter a passcode generated by Duo as the password.  
<br clear=all />

