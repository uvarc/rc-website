<!-- Determine index of Storage Entry located in /data/service.yaml -->
{{ $services := $.Site.Data.service.service }}
{{ $storage_index := -1 }}
{{ range $i, $service := $services }}
  {{ if eq $service.name "Storage" }}
    {{ $storage_index = $i }}
  {{ end }}
{{ end }}

{{ $options := index (index $services $storage_index) "options" }}

{{ $standard_storage := index (where $options "name" "Research Standard") 0 }}
{{ $project_storage := index (where $options "name" "Research Project") 0 }}

<table class="table table-striped table-sm" style="font-size:90%;">
    <thead class="thead-dark">
    <tr>
      <th class="" style="width:16%;">Feature</th>
      <th class=""><a href="/userinfo/storage/research-project">{{ index $project_storage "name" }} Storage</a></th>
      <th class=""><a href="/userinfo/storage/research-standard"> {{ index $standard_storage "name" }} Storage</a></th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td class="">Quota</td>
      <td class="">{{ index $project_storage "quota" }}</td>
      <td class=""> {{ index $standard_storage "quota" }}</td>
    </tr>
    <tr>
      <td class="">Price</td>
      <td class=""><span> {{ index $project_storage "cost" | markdownify}} </span> </td>
      <td class="">{{ index $standard_storage "cost" | markdownify}}</td>
    </tr>
    <tr>
      <td class="">Snapshots<sup>2</sup></td>
      <td class=""> {{ index $project_storage "snapshots" }}</td>
      <td class=""> {{ index $standard_storage "snapshots" }} </td>
    </tr>
    <tr>
      <td class="">Replication<sup>3</sup></td>
      <td class=""> {{ index $project_storage "replication" }}</td>
      <td class=""> {{ index $standard_storage "replication" }} </td>
    </tr>
    <tr>
      <td class="">Backup<sup>4</sup></td>
      <td class=""> {{ index $project_storage "backup" }}</td>
      <td class=""> {{ index $standard_storage "backup" }} </td>
    </tr>
    <tr>
      <td class="">Access</td>
      <td class=""> {{ index $project_storage "access" | markdownify}}</td>
      <td class=""> {{ index $standard_storage "access" | markdownify}} </td>
    </tr>
    <tr>
      <td class="">Filesystem Location</td>
      <td class="">{{ index $project_storage "filesystem_location" | markdownify}}</td>
      <td class="">{{ index $standard_storage "filesystem_location" | markdownify}}</td>
    </tr>
    <tr>
      <td class=""> Highly Sensitive Data Storage Compliant</td>
      <td class=""> {{ index $project_storage "highly-sens-ds-compliant" | markdownify}}</td>
      <td class=""> {{ index $standard_storage "highly-sens-ds-compliant" | markdownify}} </td>
    </tr>
    <tr>
      <td class="">Use cases</td>
      <td class=""> {{ index $project_storage "use_cases" | markdownify}}</td>
      <td class=""> {{ index $standard_storage "use_cases" | markdownify}} </td>
    </tr>
    </tbody>
  </table>
